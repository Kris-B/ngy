<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>

{% include head.html %}
{% include ngy.html %}

</head>

<body id="page">

{% include navigation.html %}

<div id="main" role="main">
  <article class="entry">
    {% if page.image.feature %}<img src="{{ site.url }}/images/{{ page.image.feature }}" class="entry-feature-image" alt="{{ page.title }}" {% if site.logo == null %}style="margin-top:0;"{% endif %}>{% if page.image.credit %}<p class="image-credit">Photo Credit: <a href="{{ page.image.creditlink }}">{{ page.image.credit }}</a></p>{% endif %}{% endif %}
    <div class="entry-wrapper">
      <header class="entry-header">
        <h1 class="entry-title">{% if page.headline %}{{ page.headline }}{% else %}{{ page.title }}{% endif %}</h1>
      </header>
      <div class="entry-content">
        {{ content }}
        
        <div id="#nanoprez_toc"></div>
        
        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    {% include footer.html %}
  </footer>
</div><!-- /.footer-wrapper -->

{% include scripts.html %}

<script>
  
      var $toc=$('#nanoprez_toc');
      $toc.empty();
      var $tocParents=[$toc];
      
      $('.entry-content').find('h1, h2, h3').each(function() {
        var $el = $(this);
        console.dir($el);
        var level = parseInt(this.nodeName[1]);
        console.log(level);
        
        // add ID
        var curID=$el.attr('id');
        //locationHash = locationHash.slice(0,level-1);
        //locationHash[level-1] = $el.text();
        //var slug = URLify(locationHash.join('-'));
        //$el.attr('id', slug);

        // add to TOC
        if( !$tocParents[level-1].is( "ul" ) ) {
          var $ul=$('<ul class="side-nav"></ul>').appendTo($tocParents[level-1]);
          $tocParents[level-1]=$ul;
        }
        var $cur=$('<li><a href="#'+curID+'" id="link-'+curID+'">' + $el.text() + '</a></li>').appendTo($tocParents[level-1]);
  console.dir($cur);
  console.dir($tocParents[level-1]);
        $tocParents = $tocParents.slice(0,level);
        $tocParents[level] = $cur;

      });
  
  
</script>

</body>
</html>
